<!--
title: Les protocoles de routage LAN
description: Tout comprendre sur le routage LAN.
published: true
date: 2021-06-25T15:30:56.879Z
tags: routage, lan, vecteur de distance, √©tat de liens, rip, ospf, igrp, is-is
editor: ckeditor
dateCreated: 2021-06-25T14:49:58.493Z
-->

<h1>Introduction</h1>
<p>L‚Äôobjectif d‚Äôun <a href="https://wiki-tech.io/R%C3%A9seau/Equipements/Routeur">routeur </a>est de toujours disposer de la route optimale pour aller d‚Äôun endroit √† l‚Äôautre. Pour cela il y a deux solutions&nbsp;:</p>
<ul>
  <li><strong>Route statique&nbsp;</strong>: un routeur avec des routes statiques utilise une route avec son protocole telle qu‚Äôelle a √©t√© configur√©e par l‚Äôadministrateur r√©seau.</li>
  <li><strong>Route dynamique&nbsp;</strong>: un routeur configur√© avec des routes dynamiques utilise un protocole de routage r√©seau qui ajuste automatiquement les routes √† emprunter en fonction des modifications de topologie ou de trafic.</li>
</ul>
<p>&nbsp;</p>
<h1>Caract√©ristiques</h1>
<p>Pour rappel, le routage consiste en la signalisation des directions pour aiguiller les datagrammes de r√©seau en r√©seau. Tous les protocole de routage ont un seul objectif&nbsp;: chercher √† minimiser une m√©trique. Cette m√©trique repr√©sente le ¬´&nbsp;co√ªt&nbsp;¬ª pour aller d‚Äôun endroit √† un autre du r√©seau.</p>
<p>Vous trouverez ci-dessous la liste des composants d‚Äôune m√©trique&nbsp;:</p>
<ul>
  <li><strong>Bande passante </strong>(en fonction du type de liaison)&nbsp;: Eth 10Mb/s, s√©rie 64kb/s, etc‚Ä¶</li>
  <li><strong>D√©lai </strong>(en fonction de la bande passante des liaisons interm√©diaires, de la taille du stockage temporaire du routeur, de la congestion du r√©seau, de la distance physique)</li>
  <li><strong>Charge </strong>(en fonction de la quantit√© de trafic d‚Äôune ressource r√©seau)</li>
  <li><strong>Fiabilit√© </strong>(en fonction du taux d‚Äôerreur)</li>
  <li><strong>Nombre de sauts </strong>(en fonction du nombre de routeurs jusqu‚Äô√† la destination)</li>
  <li><strong>Co√ªt </strong>(en fonction de la bande passante, de la d√©pense mon√©taire ou d‚Äôune autre mesure attribu√©e par un administrateur r√©seau)</li>
</ul>
<p>&nbsp;</p>
<p>Les protocoles de routage doivent converger le plus rapidement possible, ce qui explique leurs propri√©t√©s&nbsp;:</p>
<ul>
  <li><strong>Algorithme simple&nbsp;</strong>: gain en m√©moire et en temps processeur</li>
  <li><strong>Optimisation&nbsp;</strong>: prise en compte de plusieurs m√©triques et pond√©ration entre elles</li>
  <li><strong>Efficacit√© et stabilit√©</strong></li>
  <li><strong>Adaptation rapide √† des √©v√®nements du r√©seau </strong>(modification topologique, panne, ‚Ä¶)</li>
</ul>
<p>&nbsp;</p>
<p>Dans les LAN, les protocoles de routages sont regroup√©s en deux familles&nbsp;: vecteurs de distance (RIP et IGRP) et √† √©tats de liens (OSPF). Nous allons √©tudier ces deux familles dans la suite de cet article.</p>
<p>&nbsp;</p>
<h1>La diff√©rence entre forwarding et routing</h1>
<p>Le forwarding consiste √† d√©terminer le prochain saut pour un datagramme vers la destination indiqu√©e dans son adresse de destination et √† commuter le datagramme d‚Äôune interface d‚Äôentr√©e vers une interface de sortie.</p>
<p>Le routing consiste √† √©changer le contenu de sa table de routage avec ses voisins pour d√©terminer les chemins dans une architecture multi-r√©seaux. Pour ce faire, un protocole de routage est utilis√©.</p>
<p>üìå <i>Sous Linux, le forwarding est r√©alis√© par le noyau alors que le routing est r√©alis√© par un programme (daemon).</i></p>
<p>&nbsp;</p>
<h1>Le routage par vecteur de distance</h1>
<p>Ce type de protocole d√©termine la direction (le prochain saut) et la distance (le nombre de sauts) vers n‚Äôimporte quel r√©seau de l‚Äôinter-r√©seau. Il envoie p√©riodiquement tout ou partie de sa table de routage aux routeurs voisins. √Ä la r√©ception d‚Äôune mise √† jour de routage, une v√©rification de tous les chemins connus est faite et des modifications sont apport√©es si n√©cessaire.</p>
<figure class="image image_resized" style="width:36.22%;"><img src="/images/routage_vecteur_distance.png">
  <figcaption>Sch√©ma routage par vecteur de distance.</figcaption>
</figure>
<p>&nbsp;</p>
<h2>RIP v1 (RFC 1058)</h2>
<p>Le protocole RIP v1 (Routing Information Protocol) a √©t√© con√ßu en 1988.&nbsp;</p>
<p>Il utilise le protocole UDP en broadcast (<code>255.255.255.255</code>) pour √©changer les informations de routage. La gestion des routes se fait via l‚Äôutilisation de timer&nbsp;:</p>
<ul>
  <li><strong>Update timer&nbsp;</strong>: intervalle de transmission des paquets de mise √† jour (30 secondes)</li>
  <li><strong>Invalid timer&nbsp;</strong>: temps de non mise √† jour d‚Äôune entr√©e pour une route avant qu‚Äôelle ne soit marqu√©e comme invalide dans la table de routage (180 secondes)</li>
  <li><strong>Holddown timer&nbsp;</strong>: temps apr√®s lequel l‚Äôentr√©e non mise √† jour n‚Äôest plus examin√© durant le processus de recherche du meilleur chemin (180 secondes)</li>
  <li><strong>Flush timer&nbsp;</strong>: temps apr√®s lequel l‚Äôentr√©e non mise √† jour est supprim√©e de la table de routage (240 secondes)</li>
</ul>
<p>&nbsp;</p>
<p>Voici les caract√©ristiques principales de RIP v1&nbsp;:</p>
<ul>
  <li><strong>M√©trique&nbsp;</strong>: nombre de sauts</li>
  <li><strong>Algorithme&nbsp;</strong>: Bellman-Ford</li>
  <li>Il n‚Äôy a <strong>pas de prise en compte du d√©bit des liaisons</strong></li>
  <li><strong>Maximum 15 sauts</strong></li>
  <li>Type <strong>classful </strong>ce qui veut dire qu‚Äôil n‚Äôy a pas d‚Äôinformation de masque r√©seau associ√© aux destinations. En d‚Äôautres termes, il ne prend pas en charge les masques de sous-r√©seau de longueur variable.</li>
</ul>
<p>&nbsp;</p>
<h2>RIP v2 (RFC 2453)</h2>
<p>Des faiblesses de RIP v1 (co√ªt de la diffusion par broadcast, pas adapt√© aux masques √† longueur variable) est n√© RIP v2 en 1993. Contrairement √† la premi√®re version, RIP v2 utilise le multicast (<code>224.0.0.9</code>) pour envoyer les informations de routage.</p>
<p>&nbsp;</p>
<p>Voici les caract√©ristiques principales de RIP v2&nbsp;:</p>
<ul>
  <li><strong>M√©trique&nbsp;</strong>: nombre de sauts</li>
  <li><strong>Algorithme&nbsp;</strong>: Bellman-Ford</li>
  <li>Il n‚Äôy a <strong>pas de prise en compte du d√©bit des liaisons</strong></li>
  <li><strong>Maximum 15 sauts</strong></li>
  <li>Type <strong>classless </strong>ce qui veut dire que le masque est associ√© aux destinations.</li>
</ul>
<p>&nbsp;</p>
<h2>IGRP</h2>
<p>Le protocole IGRP (Interior Gateway Routing Protocol) a √©t√© d√©velopp√© par Cisco en partie pour rem√©dier aux limitations de RIP. Les mises √† jour sont transmises imm√©diatement √† chaque changement. Contrairement √† RIP qui transmet la table de routage compl√®te, IGRP n‚Äôenvoie que la ligne qui subit une modification.</p>
<p>Voici les caract√©ristiques principales d‚ÄôIGRP&nbsp;:</p>
<ul>
  <li><strong>M√©trique&nbsp;</strong>: nombre de sauts, d√©lai, bande passante, charge et fiabilit√©</li>
  <li><strong>Algorithme </strong>: Dijkstra</li>
  <li><strong>Maximum 255 sauts</strong></li>
  <li>Type <strong>classful </strong>ce qui veut dire qu‚Äôil n‚Äôy a pas d‚Äôinformation de masque r√©seau associ√© aux destinations. En d‚Äôautres termes, il ne prend pas en charge les masques de sous-r√©seau de longueur variable.</li>
</ul>
<p>&nbsp;</p>
<h2>Optimisation</h2>
<p>Deux fonctions permettent d‚Äôemp√™cher ou de r√©duire pour certains cas les boucles de routage et d‚Äôoptimiser le reroutage des flux en cas de tomb√© d‚Äôun lien. Les voici&nbsp;:</p>
<ul>
  <li><strong>Split-Horizon</strong>&nbsp;: ne pas r√©annoncer √† un routeur une route qu'on a apprise par lui. En effet, m√™me si la route ainsi renvoy√©e ne peut √™tre imm√©diatement celle de plus court chemin (+2 √† la m√©trique √† cause de l'aller-retour sur le lien), il se peut qu'en cas de rupture d'un lien amont sur le routeur d'origine, celui-ci puisse croire que la route optimale passe par le routeur qui lui a r√©annonc√© sa propre route.</li>
  <li><strong>Poison-Reverse</strong>&nbsp;: perfectionnement de Split-Horizon en r√©annon√ßant la route apprise par un routeur √† celui-ci, mais en lui affectant une m√©trique infinie (= 16) afin de signifier √† celui-ci que le chemin n'est pas √† utiliser. Cette m√©thode permet de casser imm√©diatement les boucles de routage alors que le simple split-horizon implique d'attendre la prochaine mise √† jour des tables de routage.</li>
</ul>
<p>&nbsp;</p>
<h1>Le routage par √©tat de liens</h1>
<figure class="image image_resized" style="width:29.25%;"><img src="/images/routage_etat_liens.png">
  <figcaption>Sch√©ma routage par √©tat de liens.</figcaption>
</figure>
<p>Les protocoles de routage par √©tat de liens ont √©t√© con√ßu principalement pour pallier les limitations des protocoles de routage √† vecteur de distance (notamment en terme de taille). Ils g√®rent une base de donn√©es d'informations topologiques sur laquelle ils appliquent un algorithme de calcul du plus court chemin d'abord (Shortest Path First (SPF) ou algorithme de Dijkstra).</p>
<p>Le fonctionnement du routage par √©tat de liens est le suivant&nbsp;: 1Ô∏è‚É£ Echange de paquets LSA (Link State Advertisement) qui permettent 2Ô∏è‚É£ de construire la base de donn√©es topologique sur laquelle 3Ô∏è‚É£ nous appliquons l‚Äôalgorithme SPF qui permet de 4Ô∏è‚É£ construire l‚Äôarbre de plus court chemin dont la racine est le routeur. De cet arbre 5Ô∏è‚É£, la table de routage est tir√©e.</p>
<p>L‚Äôenvoie des mises √† jour est r√©alis√© √† des intervalles moins fr√©quents que pour le routage&nbsp; par vecteur de distance (toutes les 30 minutes par exemple). Le plus important est d'avoir une base de donn√©es topologique √† jour et identique sur tous les routeurs.</p>
<p>Les principaux protocoles √† √©tats de liens sont OSPF et IS-IS.</p>
